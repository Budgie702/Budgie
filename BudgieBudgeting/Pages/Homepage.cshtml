@page
@model BudgieBudgeting.Pages.Shared.HomepageModel
@{
    ViewData["Title"] = "Homepage";
    var username = Model.Username; // Get the username from the session
}
<!DOCTYPE html>
<html>
<head>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/css/site.css">
    <link href="/css/HomepageDropdown.css">
</head>
<body>
    <h1 class="display-4" style="text-align:center">Welcome to Budgie Budgeting</h1>

    <!-- Display the username in the dropdown menu -->
    <ul class="nav navbar-nav">
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="background-color:#fff; color:black;">
                @if (!string.IsNullOrEmpty(username))
                {
                    @username  <!-- Display the username -->
                }
                else
                {
                    <span>User Name</span>  <!-- Fallback if no username is available -->
                }
                <span class="glyphicon glyphicon-user pull-right"></span>
            </a>
            <ul class="dropdown-menu">
                <li class="dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Account Settings <span class="glyphicon glyphicon-cog pull-right"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="/Update_Account">Update Account</a></li>
                        <li><a href="/Delete_account">Delete Account</a></li>
                    </ul>
                </li>
                <li class="divider"></li>
                <li class="dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Budgets<span class="glyphicon glyphicon-stats pull-right"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="/Create_Budget_Income">Create Budget</a></li>
                        <li><a href="/Update_Budget_Income">Update Budget Income</a></li>
                        <li><a href="/Update_Budget">Update Budget</a></li>
                        <li><a href="/Update_Spending">Update Spending</a></li>
                        <li><a href="Check_Spending">Check Spending</a></li>
                        <li><a href="#">Delete Budget</a></li>
                        <li><a href="Compare_Budget_and_Spend">Budget VS Spending</a></li>
                    </ul>
                </li>
                <li class="divider"></li>
                <li class="dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">More Options <span class="glyphicon glyphicon-option-horizontal pull-right"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Sub Option 1</a></li>
                        <li><a href="#">Sub Option 2</a></li>
                    </ul>
                </li>
                <li class="divider"></li>
                <li><a href="/SignOut">Sign Out <span class="glyphicon glyphicon-log-out pull-right"></span></a></li>
            </ul>
        </li>
    </ul>
</body>
</html>

<script>
    $(document).ready(function () {
        $('.dropdown-submenu a.dropdown-toggle').on("click", function (e) {
            $(this).next('ul').toggle();
            e.stopPropagation();
            e.preventDefault();
        });
    });
</script>
